
# Subiect 24, Manolache Andrei, 144
# Am respectat cadrul apelului, problema imi merge

.data
nr: .word 1024
msjSup: .asciiz "superior"
msjInf: .asciiz "inferior"
.text
main:
# pune in stiva numarul
subu $sp,$sp,4
lw $t0,nr
sw $t0,0($sp)

jal functie # apeleaza functia

addu $sp,$sp,4 # restabileste stiva

li $t0,8
ble $v0,$t0 inferior # compara suma cu 8

li $v0,4
la $a0,msjSup
syscall

li $v0,10
syscall

inferior:
li $v0,4
la $a0,msjInf
syscall

li $v0,10
syscall

functie:

# memoreaza $fp
subu $sp,$sp,4
sw $fp,0($sp)
addi $fp,$sp,0

li $v0,0 # suma = 0

li $t0,0
li $t1,32
lw $t2,4($fp) # t2 = numar

for:
bge $t0,$t1,iesire

and $t3,$t2,0x01
srl $t2,$t2,1 # shiftam la dreapta cu un bit 

add $v0,$v0,$t3  #adun bitul
addi $t0,$t0,1 # t0++
j for 

iesire:

lw $fp,0($fp)  # restabileste $fp
addi $sp,$sp,4 # restabileste stiva

jr $ra

